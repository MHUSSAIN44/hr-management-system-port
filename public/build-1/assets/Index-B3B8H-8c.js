import{r as g,x as A,w as K,W as S,a as Q,c as a,o as n,b as o,u as l,g as X,d as u,e,f,F as V,i as U,t as p,j as x,k as F,h as M,l as O}from"./app-CbFQf_sx.js";import{_ as Y}from"./AdminLayout-CxtQk0Zj.js";import{_ as Z}from"./SearchInput-DGL5slGC.js";import{_ as ee}from"./FilterDropdown-B5TSoL59.js";import{_ as se}from"./Pagination-Dm5rR0tz.js";import{_ as y,a as _}from"./InputError-BcXEORy4.js";import{_ as P}from"./TextInput-Ddq2mNMX.js";import{P as H}from"./PrimaryButton-DWgWx5Lq.js";import{_ as k}from"./SecondaryButton-B0GWn-nO.js";import"./ApplicationLogo-C9AT7BK-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-dbIahFAp.js";const te={class:"py-12"},oe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},ie={class:"p-6 bg-white border-b border-gray-200"},ae={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ne={class:"w-full md:w-1/3"},de={class:"flex gap-4 items-center"},re={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},me={class:"p-6"},ce={class:"overflow-x-auto"},ue={class:"min-w-full divide-y divide-gray-200"},pe={class:"bg-white divide-y divide-gray-200"},xe={class:"px-6 py-4 whitespace-nowrap"},ge={class:"flex items-center"},fe={class:"ml-4"},ve={class:"text-sm font-medium text-gray-900"},we={class:"px-6 py-4"},be={class:"text-sm text-gray-500"},he={class:"px-6 py-4 whitespace-nowrap"},ye={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},_e={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ke={class:"flex items-center justify-end space-x-2"},Ce=["onClick"],Le=["onClick"],je=["onClick"],Ve={key:0},Me={class:"mt-6"},$e={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ne={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ze={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Be={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},De={class:"sm:flex sm:items-start"},Ee={class:"w-full mt-3 text-center sm:mt-0 sm:text-left"},Ae={class:"space-y-4"},Se={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ue={key:0},Fe={key:1},Oe={key:1,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Pe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},He={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Te={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},qe={class:"sm:flex sm:items-start"},We={class:"w-full mt-3 text-center sm:mt-0 sm:text-left"},Ie={class:"space-y-4"},Re={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ge={key:0},Je={key:2,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ke={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Qe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},Xe={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ye={class:"sm:flex sm:items-start"},Ze={class:"w-full mt-3 text-center sm:mt-0 sm:text-left"},es={class:"space-y-4"},ss={class:"bg-gray-50 p-4 rounded-lg"},ts={class:"text-lg font-semibold text-gray-900 mb-2"},os={class:"text-gray-600 mb-4"},ls={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},is={class:"ml-2 text-gray-900"},as={key:0,class:"mt-4"},ns={class:"max-h-32 overflow-y-auto"},ds={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},rs={key:3,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ms={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},cs={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},us={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ps={class:"sm:flex sm:items-start"},xs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},gs={class:"mt-2"},fs={class:"text-sm text-gray-500"},vs={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ns={__name:"Index",props:{locations:Object,reporting_managers:Array,filters:Object},setup(w){const $=w,v=g($.filters.search||""),b=g($.filters.per_page||15),C=g(!1),L=g(!1),h=g(!1),j=g(!1),i=g(null),r=A({name:"",address:"",reporting_manager_id:""}),d=A({name:"",address:"",reporting_manager_id:""});K([v,b],()=>{S.get(route("admin.locations.index"),{search:v.value,per_page:b.value},{preserveState:!0,replace:!0})});const N=()=>{r.reset(),C.value=!0},z=c=>{i.value=c,d.name=c.name,d.address=c.address||"",d.reporting_manager_id=c.reporting_manager_id||"",L.value=!0},T=c=>{i.value=c,h.value=!0},q=c=>{i.value=c,j.value=!0},m=()=>{C.value=!1,L.value=!1,h.value=!1,j.value=!1,i.value=null},W=()=>{r.post(route("admin.locations.store"),{onSuccess:()=>{m(),r.reset()}})},I=()=>{d.put(route("admin.locations.update",i.value.id),{onSuccess:()=>{m()}})},R=()=>{S.delete(route("admin.locations.destroy",i.value.id),{onSuccess:()=>{m()}})},G=()=>{v.value=""};return(c,s)=>{const J=Q('else"');return n(),a(V,null,[o(l(X),{title:"Locations"}),o(Y,null,{header:u(()=>[e("div",{class:"flex justify-between items-center"},[s[8]||(s[8]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Locations",-1)),e("button",{onClick:N,class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 transition"},s[7]||(s[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" Add Location ")]))])]),default:u(()=>{var B;return[e("div",te,[e("div",oe,[e("div",le,[e("div",ie,[e("div",ae,[e("div",ne,[o(Z,{modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=t=>v.value=t),placeholder:"Search locations..."},null,8,["modelValue"])]),e("div",de,[o(ee,{modelValue:b.value,"onUpdate:modelValue":s[1]||(s[1]=t=>b.value=t),label:"Per Page",options:[15,25,50,100]},null,8,["modelValue"]),e("button",{onClick:G,class:"px-4 py-2 bg-gray-200 rounded-md text-xs font-semibold text-gray-700 hover:bg-gray-300"}," Reset ")])])])]),e("div",re,[e("div",me,[e("div",ce,[e("table",ue,[s[15]||(s[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Location Name "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Address "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Employees "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",pe,[(n(!0),a(V,null,U(w.locations.data,t=>{var D;return n(),a("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",xe,[e("div",ge,[s[9]||(s[9]=e("div",{class:"flex-shrink-0 h-10 w-10"},[e("div",{class:"h-10 w-10 rounded-full bg-purple-500 flex items-center justify-center"},[e("svg",{class:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])])],-1)),e("div",fe,[e("div",ve,p(t.name),1)])])]),e("td",we,[e("div",be,p(t.address||"No address provided"),1)]),e("td",he,[e("span",ye,p(((D=t.employees)==null?void 0:D.length)||0)+" employees ",1)]),e("td",_e,[e("div",ke,[e("button",{onClick:E=>T(t),class:"text-blue-600 hover:text-blue-900",title:"View"},s[10]||(s[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,Ce),e("button",{onClick:E=>z(t),class:"text-indigo-600 hover:text-indigo-900",title:"Edit"},s[11]||(s[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Le),e("button",{onClick:E=>q(t),class:"text-red-600 hover:text-red-900",title:"Delete"},s[12]||(s[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,je)])])])}),128)),w.locations.data.length===0?(n(),a("tr",Ve,[e("td",{colspan:"5",class:"px-6 py-4 text-center text-gray-500"},[s[13]||(s[13]=x(" No locations found. ")),e("button",{onClick:N,class:"text-blue-600 hover:text-blue-900"},"Create your first location"),s[14]||(s[14]=x(". "))])])):f("",!0)])])]),e("div",Me,[o(se,{links:w.locations.links},null,8,["links"])])])])])]),C.value?(n(),a("div",$e,[e("div",Ne,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:m}),s[18]||(s[18]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",ze,[e("form",{onSubmit:F(W,["prevent"])},[e("div",Be,[e("div",De,[e("div",Ee,[s[16]||(s[16]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Create New Location",-1)),e("div",Ae,[e("div",null,[o(y,{for:"create_name",value:"Location Name"}),o(P,{id:"create_name",modelValue:l(r).name,"onUpdate:modelValue":s[2]||(s[2]=t=>l(r).name=t),type:"text",class:"mt-1 block w-full",required:"",placeholder:"e.g., Main Office"},null,8,["modelValue"]),o(_,{message:l(r).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[o(y,{for:"create_address",value:"Address (Optional)"}),M(e("textarea",{id:"create_address","onUpdate:modelValue":s[3]||(s[3]=t=>l(r).address=t),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Complete address..."},null,512),[[O,l(r).address]]),o(_,{message:l(r).errors.address,class:"mt-2"},null,8,["message"])])])])])]),e("div",Se,[o(H,{type:"submit",disabled:l(r).processing,class:"w-full sm:w-auto sm:ml-3"},{default:u(()=>[l(r).processing?(n(),a("span",Ue,"Creating...")):(n(),a("span",Fe,"Create Location"))]),_:1},8,["disabled"]),o(k,{onClick:m,class:"mt-3 w-full sm:mt-0 sm:w-auto"},{default:u(()=>s[17]||(s[17]=[x(" Cancel ")])),_:1})])],32)])])])):f("",!0),L.value?(n(),a("div",Oe,[e("div",Pe,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:m}),s[22]||(s[22]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",He,[e("form",{onSubmit:F(I,["prevent"])},[e("div",Te,[e("div",qe,[e("div",We,[s[19]||(s[19]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Edit Location",-1)),e("div",Ie,[e("div",null,[o(y,{for:"edit_name",value:"Location Name"}),o(P,{id:"edit_name",modelValue:l(d).name,"onUpdate:modelValue":s[4]||(s[4]=t=>l(d).name=t),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(_,{message:l(d).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[o(y,{for:"edit_address",value:"Address (Optional)"}),M(e("textarea",{id:"edit_address","onUpdate:modelValue":s[5]||(s[5]=t=>l(d).address=t),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[O,l(d).address]]),o(_,{message:l(d).errors.address,class:"mt-2"},null,8,["message"])])])])])]),e("div",Re,[o(H,{type:"submit",disabled:l(d).processing,class:"w-full sm:w-auto sm:ml-3"},{default:u(()=>[l(d).processing?(n(),a("span",Ge,"Updating...")):f("",!0),M((n(),a("span",null,s[20]||(s[20]=[x("Update Location")]))),[[J]])]),_:1},8,["disabled"]),o(k,{onClick:m,class:"mt-3 w-full sm:mt-0 sm:w-auto"},{default:u(()=>s[21]||(s[21]=[x(" Cancel ")])),_:1})])],32)])])])):f("",!0),h.value&&i.value?(n(),a("div",Je,[e("div",Ke,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:m}),s[27]||(s[27]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",Qe,[e("div",Xe,[e("div",Ye,[e("div",Ze,[s[25]||(s[25]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Location Details",-1)),e("div",es,[e("div",ss,[e("h4",ts,p(i.value.name),1),e("p",os,p(i.value.address||"No address provided"),1),e("div",ls,[e("div",null,[s[23]||(s[23]=e("span",{class:"font-medium text-gray-500"},"Total Employees:",-1)),e("span",is,p(((B=i.value.employees)==null?void 0:B.length)||0),1)])])]),i.value.employees&&i.value.employees.length>0?(n(),a("div",as,[s[24]||(s[24]=e("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Employees at this location:",-1)),e("div",ns,[(n(!0),a(V,null,U(i.value.employees,t=>(n(),a("div",{key:t.id,class:"text-sm text-gray-600 py-1"}," • "+p(t.employee_name),1))),128))])])):f("",!0)])])])]),e("div",ds,[e("button",{onClick:s[6]||(s[6]=t=>{z(i.value),h.value=!1}),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"}," Edit Location "),o(k,{onClick:m,class:"mt-3 w-full sm:mt-0 sm:w-auto"},{default:u(()=>s[26]||(s[26]=[x(" Close ")])),_:1})])])])])):f("",!0),j.value&&i.value?(n(),a("div",rs,[e("div",ms,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:m}),s[31]||(s[31]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",cs,[e("div",us,[e("div",ps,[s[29]||(s[29]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",xs,[s[28]||(s[28]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Delete Location",-1)),e("div",gs,[e("p",fs,' Are you sure you want to delete "'+p(i.value.name)+'"? This action cannot be undone. ',1)])])])]),e("div",vs,[e("button",{onClick:R,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),o(k,{onClick:m,class:"mt-3 w-full sm:mt-0 sm:w-auto"},{default:u(()=>s[30]||(s[30]=[x(" Cancel ")])),_:1})])])])])):f("",!0)]}),_:1})],64)}}};export{Ns as default};
