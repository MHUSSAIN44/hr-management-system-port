import{r as u,x as q,w as I,W as Y,a as G,c as l,o as n,b as a,u as i,g as J,d as C,e,f as c,t as o,F as T,i as K,n as z,j as w,k as F,h as M,l as D,S as Q}from"./app-CbFQf_sx.js";import{_ as X}from"./ManagerLayout-DVDNpHLL.js";import{_ as Z}from"./SearchInput-DGL5slGC.js";import{_ as V}from"./FilterDropdown-B5TSoL59.js";import{_ as ee}from"./Pagination-Dm5rR0tz.js";import"./ApplicationLogo-C9AT7BK-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-dbIahFAp.js";const te={class:"flex justify-between items-center"},se={class:"flex space-x-3"},oe={class:"py-12"},le={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ne={class:"grid grid-cols-2 gap-4 mb-6 sm:grid-cols-4"},re={class:"bg-white overflow-hidden shadow-sm rounded-lg border-l-4 border-blue-500"},ie={class:"p-4"},de={class:"flex items-center justify-between"},ae={class:"text-2xl font-bold text-gray-900"},me={class:"bg-white overflow-hidden shadow-sm rounded-lg border-l-4 border-yellow-500"},ue={class:"p-4"},ce={class:"flex items-center justify-between"},pe={class:"text-2xl font-bold text-gray-900"},ge={class:"bg-white overflow-hidden shadow-sm rounded-lg border-l-4 border-green-500"},xe={class:"p-4"},fe={class:"flex items-center justify-between"},ve={class:"text-2xl font-bold text-gray-900"},be={class:"bg-white overflow-hidden shadow-sm rounded-lg border-l-4 border-red-500"},he={class:"p-4"},ye={class:"flex items-center justify-between"},we={class:"text-2xl font-bold text-gray-900"},_e={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},ke={class:"p-6 bg-white border-b border-gray-200"},je={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Ce={class:"md:col-span-2"},Me={class:"mt-4"},Ve={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Le={class:"p-6"},Re={class:"space-y-6"},Ae={class:"flex items-start justify-between"},Be={class:"flex-1"},Se={class:"flex items-center space-x-3 mb-3"},qe={class:"flex-shrink-0 h-10 w-10"},Te={class:"h-10 w-10 rounded-full bg-green-500 flex items-center justify-center"},ze={class:"text-white text-sm font-semibold"},Fe={class:"text-lg font-medium text-gray-900"},De={class:"text-sm text-gray-500"},Ne={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Pe={class:"text-sm text-gray-600"},Ue={class:"text-xs text-gray-500"},$e={class:"mb-4"},Oe={class:"text-sm text-gray-600"},Ee={key:0,class:"bg-blue-50 border-l-4 border-blue-400 p-3"},He={class:"text-sm text-blue-700"},We={key:0,class:"ml-4 flex flex-col space-y-2"},Ie=["onClick"],Ye=["onClick"],Ge={key:0,class:"text-center py-12"},Je={key:0,class:"mt-6"},Ke={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Qe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Xe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ze={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},et={class:"sm:flex sm:items-start"},tt={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},st={class:"mt-2"},ot={class:"text-sm text-gray-500"},lt={class:"mt-4"},nt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},rt=["disabled"],it={key:0},dt={key:1},at={key:1,class:"fixed inset-0 z-50 overflow-y-auto"},mt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ut={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},ct={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},pt={class:"sm:flex sm:items-start"},gt={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},xt={class:"mt-2"},ft={class:"text-sm text-gray-500"},vt={class:"mt-4"},bt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ht=["disabled"],yt={key:0},Rt={__name:"Index",props:{leaves:Object,stats:Object,filters:Object},setup(d){const h=d,f=u(h.filters.employee||""),y=u(h.filters.per_page||15),v=u(h.filters.status||""),b=u(h.filters.leave_type||""),_=u(!1),k=u(!1),m=u(null),p=q({comments:""}),g=q({comments:""});I([f,y,v,b],()=>{Y.get(route("manager.leave.index"),{employee:f.value,per_page:y.value,status:v.value,leave_type:b.value},{preserveState:!0,replace:!0})});const N=r=>{m.value=r,p.reset(),_.value=!0},P=r=>{m.value=r,g.reset(),k.value=!0},x=()=>{_.value=!1,k.value=!1,m.value=null},U=()=>{p.post(route("manager.leave.approve",m.value.id),{onSuccess:()=>{x()}})},$=()=>{g.post(route("manager.leave.reject",m.value.id),{onSuccess:()=>{x()}})},O=()=>{f.value="",v.value="",b.value=""},L=r=>new Date(r).toLocaleDateString(),E=r=>{switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},H=r=>{switch(r){case"annual":return"bg-blue-100 text-blue-800";case"medical":return"bg-red-100 text-red-800";case"emergency":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return(r,t)=>{const W=G('else"');return n(),l(T,null,[a(i(J),{title:"Team Leave Requests"}),a(X,null,{header:C(()=>[e("div",te,[t[7]||(t[7]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Team Leave Requests",-1)),e("div",se,[a(i(Q),{href:r.route("manager.leave.my"),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 transition"},{default:C(()=>t[6]||(t[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),w(" My Leave Requests ")])),_:1},8,["href"])])])]),default:C(()=>{var R,A;return[e("div",oe,[e("div",le,[e("div",ne,[e("div",re,[e("div",ie,[e("div",de,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Requests",-1)),e("p",ae,o(d.stats.total),1)]),t[9]||(t[9]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1))])])]),e("div",me,[e("div",ue,[e("div",ce,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pending",-1)),e("p",pe,o(d.stats.pending),1)]),t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1))])])]),e("div",ge,[e("div",xe,[e("div",fe,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Approved",-1)),e("p",ve,o(d.stats.approved),1)]),t[13]||(t[13]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1))])])]),e("div",be,[e("div",he,[e("div",ye,[e("div",null,[t[14]||(t[14]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rejected",-1)),e("p",we,o(d.stats.rejected),1)]),t[15]||(t[15]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])])],-1))])])])]),e("div",_e,[e("div",ke,[e("div",je,[e("div",Ce,[a(Z,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),placeholder:"Search employee..."},null,8,["modelValue"])]),e("div",null,[a(V,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),label:"Status",options:[{value:"",label:"All Status"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}]},null,8,["modelValue"])]),e("div",null,[a(V,{modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=s=>b.value=s),label:"Leave Type",options:[{value:"",label:"All Types"},{value:"annual",label:"Annual"},{value:"medical",label:"Medical"},{value:"emergency",label:"Emergency"}]},null,8,["modelValue"])]),e("div",{class:"flex items-end"},[e("button",{onClick:O,class:"w-full px-4 py-2 bg-gray-200 rounded-md text-xs font-semibold text-gray-700 hover:bg-gray-300"}," Reset Filters ")])]),e("div",Me,[a(V,{modelValue:y.value,"onUpdate:modelValue":t[3]||(t[3]=s=>y.value=s),label:"Per Page",options:[15,25,50,100]},null,8,["modelValue"])])])]),e("div",Ve,[e("div",Le,[e("div",Re,[(n(!0),l(T,null,K(d.leaves.data,s=>{var B,S;return n(),l("div",{key:s.id,class:"bg-gray-50 border border-gray-200 rounded-lg p-6 hover:bg-gray-100 transition"},[e("div",Ae,[e("div",Be,[e("div",Se,[e("div",qe,[e("div",Te,[e("span",ze,o(s.employee.employee_name.split(" ").map(j=>j[0]).join("")),1)])]),e("div",null,[e("h3",Fe,o(s.employee.employee_name),1),e("p",De,o((B=s.employee.designation)==null?void 0:B.name)+" - "+o((S=s.employee.department)==null?void 0:S.name),1)])]),e("div",Ne,[e("div",null,[e("span",{class:z(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",H(s.leave_type)])},o(s.leave_type)+" Leave ",3)]),e("div",null,[e("p",Pe,o(L(s.start_date))+" to "+o(L(s.end_date)),1),e("p",Ue,o(s.days_requested)+" days",1)]),e("div",null,[e("span",{class:z(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",E(s.manager_status)])},o(s.manager_status),3)])]),e("div",$e,[t[16]||(t[16]=e("p",{class:"text-sm font-medium text-gray-700"},"Reason:",-1)),e("p",Oe,o(s.reason),1)]),s.manager_comments?(n(),l("div",Ee,[t[17]||(t[17]=e("p",{class:"text-sm font-medium text-blue-800"},"Your Comments",-1)),e("p",He,o(s.manager_comments),1)])):c("",!0)]),s.manager_status==="pending"?(n(),l("div",We,[e("button",{onClick:j=>N(s),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},t[18]||(t[18]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),w(" Approve ")]),8,Ie),e("button",{onClick:j=>P(s),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},t[19]||(t[19]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),w(" Reject ")]),8,Ye)])):c("",!0)])])}),128)),d.leaves.data.length===0?(n(),l("div",Ge,t[20]||(t[20]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No leave requests",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"No team members have submitted leave requests yet.",-1)]))):c("",!0)]),d.leaves.data.length>0?(n(),l("div",Je,[a(ee,{links:d.leaves.links},null,8,["links"])])):c("",!0)])])])]),_.value?(n(),l("div",Ke,[e("div",Qe,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:x}),t[24]||(t[24]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",Xe,[e("form",{onSubmit:F(U,["prevent"])},[e("div",Ze,[e("div",et,[t[23]||(t[23]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",tt,[t[22]||(t[22]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Approve Leave Request",-1)),e("div",st,[e("p",ot," Are you sure you want to approve this leave request from "+o((R=m.value)==null?void 0:R.employee.employee_name)+"? ",1),e("div",lt,[t[21]||(t[21]=e("label",{for:"approve_comments",class:"block text-sm font-medium text-gray-700"},"Comments (Optional)",-1)),M(e("textarea",{id:"approve_comments","onUpdate:modelValue":t[4]||(t[4]=s=>i(p).comments=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Add any comments..."},null,512),[[D,i(p).comments]])])])])])]),e("div",nt,[e("button",{type:"submit",disabled:i(p).processing,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"},[i(p).processing?(n(),l("span",it,"Approving...")):(n(),l("span",dt,"Approve"))],8,rt),e("button",{type:"button",onClick:x,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])):c("",!0),k.value?(n(),l("div",at,[e("div",mt,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:x}),t[29]||(t[29]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",ut,[e("form",{onSubmit:F($,["prevent"])},[e("div",ct,[e("div",pt,[t[27]||(t[27]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e("div",gt,[t[26]||(t[26]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Reject Leave Request",-1)),e("div",xt,[e("p",ft," Are you sure you want to reject this leave request from "+o((A=m.value)==null?void 0:A.employee.employee_name)+"? ",1),e("div",vt,[t[25]||(t[25]=e("label",{for:"reject_comments",class:"block text-sm font-medium text-gray-700"},"Reason for Rejection *",-1)),M(e("textarea",{id:"reject_comments","onUpdate:modelValue":t[5]||(t[5]=s=>i(g).comments=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Please provide reason for rejection...",required:""},null,512),[[D,i(g).comments]])])])])])]),e("div",bt,[e("button",{type:"submit",disabled:i(g).processing,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"},[i(g).processing?(n(),l("span",yt,"Rejecting...")):c("",!0),M((n(),l("span",null,t[28]||(t[28]=[w("Reject")]))),[[W]])],8,ht),e("button",{type:"button",onClick:x,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])):c("",!0)]}),_:1})],64)}}};export{Rt as default};
