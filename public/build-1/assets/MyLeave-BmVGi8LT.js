import{r as A,x as N,y as c,c as n,o as r,b as i,u as a,g as R,d as v,e,f as u,t as d,F as C,i as O,n as g,j as y,k as $,h as V,v as U,l as Y,S as I}from"./app-CbFQf_sx.js";import{_ as P}from"./ManagerLayout-DVDNpHLL.js";import{_ as F}from"./Pagination-Dm5rR0tz.js";import{_ as f,a as b}from"./InputError-BcXEORy4.js";import{_ as q}from"./TextInput-Ddq2mNMX.js";import{P as G}from"./PrimaryButton-DWgWx5Lq.js";import{_ as J}from"./SecondaryButton-B0GWn-nO.js";import"./ApplicationLogo-C9AT7BK-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-dbIahFAp.js";const K={class:"flex justify-between items-center"},Q={class:"flex space-x-3"},W={class:"py-12"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},ee={class:"bg-white overflow-hidden shadow-sm rounded-lg border-l-4 border-blue-500"},te={class:"p-6"},se={class:"flex items-center justify-between"},ae={class:"text-3xl font-bold text-blue-600"},le={class:"text-xs text-gray-500 mt-1"},ne={class:"mt-3"},re={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},oe={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800"},de={class:"bg-white overflow-hidden shadow-sm rounded-lg border-l-4 border-red-500"},ie={class:"p-6"},ue={class:"flex items-center justify-between"},me={class:"text-3xl font-bold text-red-600"},ce={class:"text-xs text-gray-500 mt-1"},pe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ve={class:"p-6"},ge={class:"space-y-6"},xe={class:"flex items-start justify-between"},ye={class:"flex-1"},fe={class:"flex items-center space-x-3 mb-3"},be={class:"text-sm text-gray-500"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},we={class:"text-sm text-gray-600"},he={class:"text-sm text-gray-600"},ke={class:"mb-4"},Me={class:"text-sm text-gray-600"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Le={key:0,class:"bg-purple-50 border-l-4 border-purple-400 p-3"},Be={class:"text-sm text-purple-700"},je={key:0,class:"text-center py-12"},Se={key:0,class:"mt-6"},Ae={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Ce={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ve={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},qe={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ze={class:"space-y-4"},Te=["disabled"],Ee={key:0,class:"mt-2 text-sm text-red-600"},He={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ne={class:"flex items-center justify-between"},Re={class:"text-lg font-bold text-blue-600"},Oe={key:1,class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},$e={class:"flex items-start"},Ue={class:"ml-3"},Ye={class:"text-sm text-gray-600 mt-1"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pe={key:0,class:"text-xs text-blue-600 mt-1"},Fe={key:1,class:"text-xs text-green-600 mt-1"},Ge={key:2,class:"text-xs text-orange-600 mt-1"},Je={key:2,class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},Ke={class:"flex items-center justify-between"},Qe={key:0,class:"mt-2 text-sm text-red-600"},We={key:3,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Xe={class:"flex"},Ze={class:"ml-3"},et={class:"mt-2 text-sm text-red-700"},tt={key:0},st={key:1},at={key:2},lt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},nt={key:0},rt={key:1},yt={__name:"MyLeave",props:{leaves:Object,leaveBalance:Object,employee:Object},setup(m){const _=m;A(15);const w=A(!1),s=N({leave_type:"",start_date:"",end_date:"",reason:""}),p=c(()=>{if(s.start_date&&s.end_date){const o=new Date(s.start_date),t=new Date(s.end_date),l=Math.abs(t-o);return Math.ceil(l/(1e3*60*60*24))+1}return 0}),x=c(()=>{switch(s.leave_type){case"annual":return _.leaveBalance.annual_available;case"medical":return _.leaveBalance.medical_available;case"emergency":return"No limit";default:return 0}}),L=c(()=>{switch(s.leave_type){case"annual":return _.leaveBalance.can_apply_annual;case"medical":case"emergency":return!0;default:return!1}}),B=c(()=>{const o=new Date;switch(s.leave_type){case"annual":const t=new Date;return t.setDate(o.getDate()+30),t.toISOString().split("T")[0];case"medical":return null;case"emergency":return o.toISOString().split("T")[0];default:return o.toISOString().split("T")[0]}}),z=c(()=>s.start_date?s.start_date:B.value),j=c(()=>{if(!s.start_date||!s.end_date)return!0;const o=new Date;o.setHours(0,0,0,0);const t=new Date(s.start_date);if(new Date(s.end_date)<t)return!1;switch(s.leave_type){case"annual":const D=new Date;return D.setDate(o.getDate()+30),D.setHours(0,0,0,0),t>=D;case"medical":return!0;case"emergency":return t>=o;default:return t>=o}}),T=c(()=>{if(!s.leave_type)return"";switch(s.leave_type){case"annual":const o=new Date,t=new Date;return t.setDate(o.getDate()+30),`You can only apply for annual leave from ${t.toLocaleDateString()} onwards (30 days from current date).`;case"medical":return"Medical leave can be applied for any date (past, present, or future).";case"emergency":return"Emergency leave can only be applied from today onwards.";default:return""}}),S=()=>{s.reset(),w.value=!0},h=()=>{w.value=!1,s.reset()},E=()=>{s.post(route("manager.leave.store"),{onSuccess:()=>{h()}})},k=o=>new Date(o).toLocaleDateString(),M=o=>{switch(o){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},H=o=>{switch(o){case"annual":return"bg-blue-100 text-blue-800";case"medical":return"bg-red-100 text-red-800";case"emergency":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return(o,t)=>(r(),n(C,null,[i(a(R),{title:"My Leave Requests"}),i(P,null,{header:v(()=>[e("div",K,[t[6]||(t[6]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"My Leave Requests",-1)),e("div",Q,[e("button",{onClick:S,class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 transition"},t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),y(" Apply for Leave ")])),i(a(I),{href:o.route("manager.leave.index"),class:"inline-flex items-center px-4 py-2 bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest hover:bg-gray-300 transition"},{default:v(()=>t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),y(" Team Requests ")])),_:1},8,["href"])])])]),default:v(()=>[e("div",W,[e("div",X,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-gray-500"},"Annual Leave",-1)),e("p",ae,d(m.leaveBalance.annual_available),1),e("p",le," Accrued: "+d(m.leaveBalance.annual_accrued)+" | Used: "+d(m.leaveBalance.annual_used),1)]),t[8]||(t[8]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1))]),e("div",ne,[m.leaveBalance.can_apply_annual?(r(),n("span",re," ✓ Eligible ")):(r(),n("span",oe," ⏳ Not Eligible Yet "))])])]),e("div",de,[e("div",ie,[e("div",ue,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-500"},"Medical Leave",-1)),e("p",me,d(m.leaveBalance.medical_available),1),e("p",ce," Used: "+d(m.leaveBalance.medical_used)+"/14 days this year ",1)]),t[10]||(t[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])])],-1))]),t[11]||(t[11]=e("div",{class:"mt-3"},[e("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"}," ✓ Available ")],-1))])]),t[12]||(t[12]=e("div",{class:"bg-white overflow-hidden shadow-sm rounded-lg border-l-4 border-orange-500"},[e("div",{class:"p-6"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("p",{class:"text-sm font-medium text-gray-500"},"Emergency Leave"),e("p",{class:"text-xl font-bold text-orange-600"},"No Limit"),e("p",{class:"text-xs text-gray-500 mt-1"}," Available from current date onwards ")]),e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])])])]),e("div",{class:"mt-3"},[e("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"}," ✓ Always Available ")])])],-1))]),e("div",pe,[t[23]||(t[23]=e("div",{class:"px-6 py-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center"},[e("h3",{class:"text-lg font-medium text-gray-900"},"My Leave History"),e("p",{class:"text-sm text-gray-600"},"Note: As a manager, your leave requests go directly to admin for approval.")],-1)),e("div",ve,[e("div",ge,[(r(!0),n(C,null,O(m.leaves.data,l=>(r(),n("div",{key:l.id,class:"bg-gray-50 border border-gray-200 rounded-lg p-6"},[e("div",xe,[e("div",ye,[e("div",fe,[e("span",{class:g(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",H(l.leave_type)])},d(l.leave_type)+" Leave ",3),e("span",{class:g(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",M(l.overall_status)])},d(l.overall_status),3),e("span",be,d(l.days_requested)+" days",1)]),e("div",_e,[e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-700"},"Duration",-1)),e("p",we,d(k(l.start_date))+" to "+d(k(l.end_date)),1)]),e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-gray-700"},"Applied On",-1)),e("p",he,d(k(l.created_at)),1)])]),e("div",ke,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-gray-700"},"Reason",-1)),e("p",Me,d(l.reason),1)]),e("div",De,[e("div",null,[t[16]||(t[16]=e("p",{class:"text-sm font-medium text-gray-700"},"Manager Status",-1)),e("span",{class:g(["inline-flex items-center px-2 py-1 rounded text-xs font-medium",M(l.manager_status)])},d(l.manager_status)+" (Auto-approved) ",3)]),e("div",null,[t[17]||(t[17]=e("p",{class:"text-sm font-medium text-gray-700"},"Admin Status",-1)),e("span",{class:g(["inline-flex items-center px-2 py-1 rounded text-xs font-medium",M(l.admin_status)])},d(l.admin_status),3)])]),l.admin_comments?(r(),n("div",Le,[t[18]||(t[18]=e("p",{class:"text-sm font-medium text-purple-800"},"Admin Comments",-1)),e("p",Be,d(l.admin_comments),1)])):u("",!0)])])]))),128)),m.leaves.data.length===0?(r(),n("div",je,[t[20]||(t[20]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t[21]||(t[21]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No leave requests",-1)),t[22]||(t[22]=e("p",{class:"mt-1 text-sm text-gray-500"},"You haven't applied for any leaves yet.",-1)),e("div",{class:"mt-6"},[e("button",{onClick:S,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"},t[19]||(t[19]=[e("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),y(" Apply for Leave ")]))])])):u("",!0)]),m.leaves.data.length>0?(r(),n("div",Se,[i(F,{links:m.leaves.links},null,8,["links"])])):u("",!0)])])])]),w.value?(r(),n("div",Ae,[e("div",Ce,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:h}),t[36]||(t[36]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"​",-1)),e("div",Ve,[e("form",{onSubmit:$(E,["prevent"])},[e("div",qe,[t[33]||(t[33]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Apply for Leave",-1)),t[34]||(t[34]=e("p",{class:"text-sm text-gray-600 mb-6"},"As a manager, your leave request will go directly to admin for approval.",-1)),e("div",ze,[e("div",null,[i(f,{for:"leave_type",value:"Leave Type"}),V(e("select",{id:"leave_type","onUpdate:modelValue":t[0]||(t[0]=l=>a(s).leave_type=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",required:""},[t[24]||(t[24]=e("option",{value:""},"Select Leave Type",-1)),e("option",{value:"annual",disabled:!m.leaveBalance.can_apply_annual},"Annual Leave",8,Te),t[25]||(t[25]=e("option",{value:"medical"},"Medical Leave",-1)),t[26]||(t[26]=e("option",{value:"emergency"},"Emergency Leave",-1))],512),[[U,a(s).leave_type]]),i(b,{message:a(s).errors.leave_type,class:"mt-2"},null,8,["message"]),a(s).leave_type&&!L.value?(r(),n("div",Ee," You are not eligible to apply for this leave type. ")):u("",!0)]),a(s).leave_type?(r(),n("div",He,[e("div",Ne,[t[27]||(t[27]=e("span",{class:"text-sm font-medium text-blue-800"},"Available Balance:",-1)),e("span",Re,d(x.value)+" days",1)])])):u("",!0),a(s).leave_type?(r(),n("div",Oe,[e("div",$e,[t[29]||(t[29]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-blue-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Ue,[t[28]||(t[28]=e("h4",{class:"text-sm font-medium text-gray-800"},"Date Selection Rules",-1)),e("p",Ye,d(T.value),1)])])])):u("",!0),e("div",Ie,[e("div",null,[i(f,{for:"start_date",value:"Start Date"}),i(q,{id:"start_date",modelValue:a(s).start_date,"onUpdate:modelValue":t[1]||(t[1]=l=>a(s).start_date=l),type:"date",class:"mt-1 block w-full",min:B.value,required:""},null,8,["modelValue","min"]),i(b,{message:a(s).errors.start_date,class:"mt-2"},null,8,["message"]),a(s).leave_type==="annual"?(r(),n("div",Pe," ℹ️ Annual leave can only be applied 30 days from current date ")):u("",!0),a(s).leave_type==="medical"?(r(),n("div",Fe," ℹ️ Medical leave can be applied for any date ")):u("",!0),a(s).leave_type==="emergency"?(r(),n("div",Ge," ℹ️ Emergency leave from today onwards only ")):u("",!0)]),e("div",null,[i(f,{for:"end_date",value:"End Date"}),i(q,{id:"end_date",modelValue:a(s).end_date,"onUpdate:modelValue":t[2]||(t[2]=l=>a(s).end_date=l),type:"date",class:"mt-1 block w-full",min:z.value,required:""},null,8,["modelValue","min"]),i(b,{message:a(s).errors.end_date,class:"mt-2"},null,8,["message"])])]),p.value>0?(r(),n("div",Je,[e("div",Ke,[t[30]||(t[30]=e("span",{class:"text-sm font-medium text-gray-700"},"Total Days Requested:",-1)),e("span",{class:g(["text-lg font-bold",a(s).leave_type!=="emergency"&&p.value>x.value?"text-red-600":"text-green-600"])},d(p.value)+" days ",3)]),a(s).leave_type!=="emergency"&&p.value>x.value?(r(),n("div",Qe," ⚠️ You don't have sufficient leave balance for this request. ")):u("",!0)])):u("",!0),e("div",null,[i(f,{for:"reason",value:"Reason for Leave"}),V(e("textarea",{id:"reason","onUpdate:modelValue":t[3]||(t[3]=l=>a(s).reason=l),rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Please provide a detailed reason for your leave request...",required:""},null,512),[[Y,a(s).reason]]),i(b,{message:a(s).errors.reason,class:"mt-2"},null,8,["message"])]),!j.value&&a(s).start_date&&a(s).end_date?(r(),n("div",We,[e("div",Xe,[t[32]||(t[32]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",Ze,[t[31]||(t[31]=e("h3",{class:"text-sm font-medium text-red-800"},"Invalid Date Selection",-1)),e("div",et,[a(s).leave_type==="annual"?(r(),n("p",tt,"Annual leave can only be applied 30 days from current date onwards.")):a(s).leave_type==="emergency"?(r(),n("p",st,"Emergency leave can only be applied from today onwards.")):(r(),n("p",at,"Please ensure end date is not before start date."))])])])])):u("",!0)])]),e("div",lt,[i(G,{type:"submit",disabled:a(s).processing||!L.value||!j.value||a(s).leave_type!=="emergency"&&p.value>x.value,class:"w-full sm:w-auto sm:ml-3"},{default:v(()=>[a(s).processing?(r(),n("span",nt,"Submitting...")):(r(),n("span",rt,"Submit Leave Request"))]),_:1},8,["disabled"]),i(J,{onClick:h,class:"mt-3 w-full sm:mt-0 sm:w-auto"},{default:v(()=>t[35]||(t[35]=[y("Cancel")])),_:1})])],32)])])])):u("",!0)]),_:1})],64))}};export{yt as default};
