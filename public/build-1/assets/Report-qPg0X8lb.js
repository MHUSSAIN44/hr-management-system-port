import{r as y,x as U,c as d,o as r,b as o,u as i,g as V,d as u,e,f as b,t as l,F as k,i as z,n as M,k as E,j as B,h as N,l as D}from"./app-CbFQf_sx.js";import{_ as $}from"./AdminLayout-CxtQk0Zj.js";import{_,a as v}from"./InputError-BcXEORy4.js";import{_ as C}from"./TextInput-Ddq2mNMX.js";import{P as S}from"./PrimaryButton-DWgWx5Lq.js";import{_ as H}from"./SecondaryButton-B0GWn-nO.js";import"./ApplicationLogo-C9AT7BK-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-dbIahFAp.js";const R={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},T={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},P={class:"p-6"},G={class:"flex items-center"},I={class:"ml-5 w-0 flex-1"},J={class:"text-lg font-medium text-gray-900"},K={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},O={class:"p-6"},Q={class:"flex items-center"},W={class:"ml-5 w-0 flex-1"},X={class:"text-lg font-medium text-gray-900"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Z={class:"p-6"},ee={class:"flex items-center"},te={class:"ml-5 w-0 flex-1"},se={class:"text-lg font-medium text-gray-900"},ae={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},le={class:"p-6"},ne={class:"flex items-center"},oe={class:"ml-5 w-0 flex-1"},ie={class:"text-lg font-medium text-gray-900"},de={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},re={class:"p-6"},ce={class:"overflow-x-auto"},me={class:"min-w-full divide-y divide-gray-200"},ue={class:"bg-white divide-y divide-gray-200"},xe={class:"px-6 py-4 whitespace-nowrap"},pe={class:"flex items-center"},_e={class:"flex-shrink-0 h-10 w-10"},ve={class:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center"},fe={class:"text-white text-sm font-semibold"},ge={class:"ml-4"},he={class:"text-sm font-medium text-gray-900"},we={class:"text-sm text-gray-500"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},be={class:"px-6 py-4 whitespace-nowrap"},ke={class:"text-sm text-gray-900"},Me={class:"flex items-center space-x-2"},Be={class:"text-xs text-gray-500 mt-1"},Ce={class:"px-6 py-4 whitespace-nowrap"},Le={class:"text-sm text-gray-900"},je={class:"flex items-center space-x-2"},Ae={class:"text-xs text-gray-500 mt-1"},Ue={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"flex flex-col space-y-1"},ze={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},Ee={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800"},Ne={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},De=["onClick"],$e={key:0},Se={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},He={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Re={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},qe={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Fe={class:"text-sm text-gray-600 mb-4"},Te={class:"space-y-4"},Pe={class:"text-xs text-gray-500 mt-1"},Ge={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ie={key:0},Je={key:1},st={__name:"Report",props:{employees:Array},setup(c){const x=y(!1),m=y(null),a=U({annual_leave_balance:"",medical_leave_balance:"",reason:""}),L=n=>{m.value=n,a.annual_leave_balance=n.annual_leave_balance||0,a.medical_leave_balance=n.medical_leave_balance||0,a.reason="",x.value=!0},p=()=>{x.value=!1,m.value=null,a.reset()},j=()=>{a.post(route("admin.employees.update-leave-balance",m.value.id),{onSuccess:()=>{p()}})},A=n=>n?new Date(n).toLocaleDateString():"N/A",f=(n,t)=>t==="annual"?n<5?"text-red-600":n<10?"text-yellow-600":"text-green-600":n<3?"text-red-600":n<7?"text-yellow-600":"text-green-600";return(n,t)=>(r(),d(k,null,[o(i(V),{title:"Leave Report"}),o($,null,{header:u(()=>t[3]||(t[3]=[e("div",{class:"flex justify-between items-center"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Employee Leave Report")],-1)])),default:u(()=>{var g,h;return[e("div",R,[e("div",q,[e("div",F,[e("div",T,[e("div",P,[e("div",G,[t[5]||(t[5]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])])],-1)),e("div",I,[e("dl",null,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Employees",-1)),e("dd",J,l(c.employees.length),1)])])])])]),e("div",K,[e("div",O,[e("div",Q,[t[7]||(t[7]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",W,[e("dl",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Can Apply Annual",-1)),e("dd",X,l(c.employees.filter(s=>s.can_apply_annual).length),1)])])])])]),e("div",Y,[e("div",Z,[e("div",ee,[t[9]||(t[9]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",te,[e("dl",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Low Annual Balance",-1)),e("dd",se,l(c.employees.filter(s=>s.annual_leave_balance<5).length),1)])])])])]),e("div",ae,[e("div",le,[e("div",ne,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])])],-1)),e("div",oe,[e("dl",null,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Low Medical Balance",-1)),e("dd",ie,l(c.employees.filter(s=>s.medical_leave_balance<3).length),1)])])])])])]),e("div",de,[t[15]||(t[15]=e("div",{class:"px-6 py-4 bg-gray-50 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Employee Leave Balances"),e("p",{class:"text-sm text-gray-600 mt-1"},"Manage and update employee leave balances. Annual leave accrues at 2.5 days per month from visa start date.")],-1)),e("div",re,[e("div",ce,[e("table",me,[t[14]||(t[14]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Employee"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Visa Start Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Annual Leave"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Medical Leave"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ue,[(r(!0),d(k,null,z(c.employees,s=>(r(),d("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",xe,[e("div",pe,[e("div",_e,[e("div",ve,[e("span",fe,l(s.name.split(" ").map(w=>w[0]).join("")),1)])]),e("div",ge,[e("div",he,l(s.name),1),e("div",we,l(s.designation)+" - "+l(s.department),1)])])]),e("td",ye,l(A(s.visa_start_date)),1),e("td",be,[e("div",ke,[e("div",Me,[e("span",{class:M([f(s.annual_leave_balance,"annual"),"font-medium"])},l(s.annual_leave_balance)+" available ",3)]),e("div",Be," Accrued: "+l(s.annual_leave_accrued)+" | Used: "+l(s.annual_leave_used),1)])]),e("td",Ce,[e("div",Le,[e("div",je,[e("span",{class:M([f(s.medical_leave_balance,"medical"),"font-medium"])},l(s.medical_leave_balance)+" available ",3)]),e("div",Ae," Used: "+l(s.medical_leave_used)+"/14 ",1)])]),e("td",Ue,[e("div",Ve,[s.can_apply_annual?(r(),d("span",ze," Can Apply Annual ")):(r(),d("span",Ee," Annual Not Eligible "))])]),e("td",Ne,[e("button",{onClick:w=>L(s),class:"text-blue-600 hover:text-blue-900",title:"Update Balance"},t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,De)])]))),128)),c.employees.length===0?(r(),d("tr",$e,t[13]||(t[13]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"}," No employees found. ",-1)]))):b("",!0)])])])])])])]),x.value?(r(),d("div",Se,[e("div",He,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:p}),t[20]||(t[20]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"â€‹",-1)),e("div",Re,[e("form",{onSubmit:E(j,["prevent"])},[e("div",qe,[t[18]||(t[18]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Update Leave Balance",-1)),e("p",Fe,[t[16]||(t[16]=B(" Update leave balance for ")),e("strong",null,l((g=m.value)==null?void 0:g.name),1)]),e("div",Te,[e("div",null,[o(_,{for:"annual_leave_balance",value:"Annual Leave Balance"}),o(C,{id:"annual_leave_balance",modelValue:i(a).annual_leave_balance,"onUpdate:modelValue":t[0]||(t[0]=s=>i(a).annual_leave_balance=s),type:"number",step:"0.5",min:"0",max:"50",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(v,{message:i(a).errors.annual_leave_balance,class:"mt-2"},null,8,["message"]),e("p",Pe,"Current accrued: "+l((h=m.value)==null?void 0:h.annual_leave_accrued)+" days",1)]),e("div",null,[o(_,{for:"medical_leave_balance",value:"Medical Leave Balance"}),o(C,{id:"medical_leave_balance",modelValue:i(a).medical_leave_balance,"onUpdate:modelValue":t[1]||(t[1]=s=>i(a).medical_leave_balance=s),type:"number",step:"0.5",min:"0",max:"14",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(v,{message:i(a).errors.medical_leave_balance,class:"mt-2"},null,8,["message"]),t[17]||(t[17]=e("p",{class:"text-xs text-gray-500 mt-1"},"Maximum: 14 days per year",-1))]),e("div",null,[o(_,{for:"reason",value:"Reason for Update"}),N(e("textarea",{id:"reason","onUpdate:modelValue":t[2]||(t[2]=s=>i(a).reason=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Explain why you're updating this employee's leave balance...",required:""},null,512),[[D,i(a).reason]]),o(v,{message:i(a).errors.reason,class:"mt-2"},null,8,["message"])])])]),e("div",Ge,[o(S,{type:"submit",disabled:i(a).processing,class:"w-full sm:w-auto sm:ml-3"},{default:u(()=>[i(a).processing?(r(),d("span",Ie,"Updating...")):(r(),d("span",Je,"Update Balance"))]),_:1},8,["disabled"]),o(H,{onClick:p,class:"mt-3 w-full sm:mt-0 sm:w-auto"},{default:u(()=>t[19]||(t[19]=[B("Cancel")])),_:1})])],32)])])])):b("",!0)]}),_:1})],64))}};export{st as default};
